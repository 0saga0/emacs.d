#!/bin/sh -e

function emacswiki_get {
  curl -o $1 "http://www.emacswiki.org/emacs/download/$1"
}

echo "*** Git submodules"
git submodule foreach 'git pull'

for f in site-lisp/*/_darcs; do
  echo '***' `dirname $f`
  (cd $f/.. && darcs pull --all)
done

for f in site-lisp/*/.svn; do
  echo '***' `dirname $f`
  (cd $f/.. && svn up)
done

for f in site-lisp/*/CVS; do
  echo '***' `dirname $f`
  (cd $f/.. && cvs up -dP)
done

echo '*** todochiku'
(cd site-lisp/todochiku && emacswiki_get todochiku.el)

echo '*** paredit'
(cd site-lisp/paredit && curl -o paredit.el http://mumble.net/~campbell/emacs/paredit.el)

echo '***' js-comint
(cd site-lisp/js-comint && curl -o js-comint.el http://downloads.sourceforge.net/js-comint-el/js-comint.el)

echo '***' swank-clojure
(cd site-lisp/swank-clojure && curl -o swank-clojure.el 'http://github.com/technomancy/swank-clojure/raw/master/swank-clojure.el')

echo '***' mozrepl
(cd site-lisp/moz-repl && curl -o moz.el 'http://github.com/bard/mozrepl/blob/master/chrome/content/moz.el?raw=true')

echo '***' twit
(cd site-lisp/twit && emacswiki_get twit.el)

echo '***' paredit
(cd site-lisp/paredit && curl -o paredit.el http://mumble.net/~campbell/emacs/paredit-beta.el)

echo '***' revive
(cd site-lisp/revive && curl -o revive.el http://www.gentei.org/~yuuji/software/revive.el)

echo '***' color-theme-subdued
(cd site-lisp/color-theme-subdued && curl -o color-theme-subdued.el http://jblevins.org/git/misc.git/plain/color-theme-subdued.el)

echo '***' smooth-scrolling
(cd site-lisp/smooth-scrolling && curl -o smooth-scrolling.el http://adamspiers.org/computing/elisp/smooth-scrolling.el)

echo '***' edit-server
(cd site-lisp/edit-server && curl -o edit-server.el http://github.com/stsquad/emacs_chrome/raw/master/servers/edit-server.el)

echo '***' dsvn
(cd site-lisp/dsvn && curl -o dsvn.el http://svn.apache.org/repos/asf/subversion/trunk/contrib/client-side/emacs/dsvn.el)